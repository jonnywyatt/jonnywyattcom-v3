{"version":3,"sources":["../../../src/common/actions/dataNeeds.js"],"names":["actions","articles","dispatch","getState","state","endpoint","window","apiEndpointRootAbsolute","apiEndpointRootRelative","then","response","receiveArticles","data","catch","errorApi","article","slug","receiveArticle","type","stateKey","msg"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,UAAU;AACdC,YAAU,oBAAM;AACd,WAAO,UAACC,QAAD,EAAWC,QAAX,EAAwB;AAC7B,UAAMC,QAAQD,UAAd;AACA,UAAIE,WAAY,OAAOC,MAAP,KAAkB,WAAnB,GAAkCF,MAAMG,uBAAxC,GAAkEH,MAAMI,uBAAvF;AACAH,iBAAcA,QAAd;;AAEA,aAAO,uBAAQ,EAAEA,kBAAF,EAAYD,YAAZ,EAAR,EACJK,IADI,CACC,UAACC,QAAD,EAAc;AAClBR,iBAASF,QAAQW,eAAR,CAAwBD,SAASE,IAAjC,CAAT;AACD,OAHI,EAIJC,KAJI,CAIE,YAAM;AACXX,iBAASF,QAAQc,QAAR,CAAiB,uCAAjB,CAAT;AACD,OANI,CAAP;AAOD,KAZD;AAaD,GAfa;;AAiBdC,WAAS,iBAACC,IAAD,EAAU;AACjB,WAAO,UAACd,QAAD,EAAWC,QAAX,EAAwB;AAC7B,UAAMC,QAAQD,UAAd;AACA,UAAIE,WAAY,OAAOC,MAAP,KAAkB,WAAnB,GAAkCF,MAAMG,uBAAxC,GAAkEH,MAAMI,uBAAvF;AACAH,iBAAcA,QAAd,kBAAmCW,IAAnC;;AAEA,aAAO,uBAAQ,EAAEX,kBAAF,EAAYD,YAAZ,EAAR,EACJK,IADI,CACC,UAACC,QAAD,EAAc;AAClBR,iBAASF,QAAQiB,cAAR,CAAuBP,SAASE,IAAhC,CAAT;AACD,OAHI,EAIJC,KAJI,CAIE,YAAM;AACXX,iBAASF,QAAQc,QAAR,4CAA0DE,IAA1D,CAAT;AACD,OANI,CAAP;AAOD,KAZD;AAaD,GA/Ba;;AAiCdC,kBAAgB,wBAACF,OAAD,EAAa;AAC3B,WAAO;AACLG,YAAM,iBADD;AAELC,gBAAU,SAFL;AAGLP,YAAMG;AAHD,KAAP;AAKD,GAvCa;;AAyCdJ,mBAAiB,yBAACV,QAAD,EAAc;AAC7B,WAAO;AACLiB,YAAM,kBADD;AAELC,gBAAU,UAFL;AAGLP,YAAMX;AAHD,KAAP;AAKD,GA/Ca;;AAiDda,YAAU,kBAACM,GAAD,EAAS;AACjB,WAAO;AACLF,YAAM,WADD;AAELC,gBAAU,UAFL;AAGLP,YAAMQ;AAHD,KAAP;AAKD;AAvDa,CAAhB;;kBA0DepB,O","file":"dataNeeds.js","sourcesContent":["import request from '../utils/request';\n\nconst actions = {\n  articles: () => {\n    return (dispatch, getState) => {\n      const state = getState();\n      let endpoint = (typeof window === 'undefined') ? state.apiEndpointRootAbsolute : state.apiEndpointRootRelative;\n      endpoint = `${endpoint}/articles`;\n\n      return request({ endpoint, state })\n        .then((response) => {\n          dispatch(actions.receiveArticles(response.data));\n        })\n        .catch(() => {\n          dispatch(actions.errorApi('An error occurred retrieving articles'));\n        });\n    };\n  },\n\n  article: (slug) => {\n    return (dispatch, getState) => {\n      const state = getState();\n      let endpoint = (typeof window === 'undefined') ? state.apiEndpointRootAbsolute : state.apiEndpointRootRelative;\n      endpoint = `${endpoint}/articles/${slug}`;\n\n      return request({ endpoint, state })\n        .then((response) => {\n          dispatch(actions.receiveArticle(response.data));\n        })\n        .catch(() => {\n          dispatch(actions.errorApi(`An error occurred retrieving article: ${slug}`));\n        });\n    };\n  },\n\n  receiveArticle: (article) => {\n    return {\n      type: 'RECEIVE_ARTICLE',\n      stateKey: 'article',\n      data: article\n    };\n  },\n\n  receiveArticles: (articles) => {\n    return {\n      type: 'RECEIVE_ARTICLES',\n      stateKey: 'articles',\n      data: articles\n    };\n  },\n\n  errorApi: (msg) => {\n    return {\n      type: 'ERROR_API',\n      stateKey: 'errorApi',\n      data: msg\n    };\n  }\n};\n\nexport default actions;\n"]}