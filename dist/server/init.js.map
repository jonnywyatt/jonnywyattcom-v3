{"version":3,"sources":["../../src/server/init.js"],"names":["app","hbs","create","extname","defaultLayout","join","__dirname","set","process","env","PORT","engine","use","json","urlencoded","extended","static","get","appConfig","require","apiArticle","getBySlug","getAll","post","init","listen","info","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,MAAM,wBAAZ;AACA,IAAMC,MAAM,4BAAOC,MAAP,CAAc;AACxBC,WAAS,MADe;AAExBC,iBAAe,eAAKC,IAAL,CAAUC,SAAV,EAAqB,+BAArB;AAFS,CAAd,CAAZ;AAIAN,IAAIO,GAAJ,CAAQ,MAAR,EAAiBC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAArC;AACAV,IAAIW,MAAJ,CAAW,KAAX,EAAkBV,IAAIU,MAAtB;AACAX,IAAIO,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACAP,IAAIO,GAAJ,CAAQ,OAAR,EAAiB,eAAKF,IAAL,CAAUC,SAAV,EAAqB,wBAArB,CAAjB;;AAEAN,IAAIY,GAAJ,CAAQ,qBAAWC,IAAX,EAAR;AACAb,IAAIY,GAAJ,CAAQ,qBAAWE,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;AACAf,IAAIY,GAAJ,CAAQ,6BAAR;AACAZ,IAAIY,GAAJ,CAAQ,kBAAQI,MAAR,CAAe,eAAKX,IAAL,CAAUC,SAAV,EAAqB,cAArB,CAAf,CAAR;;AAEA,IAAMG,MAAMT,IAAIiB,GAAJ,CAAQ,KAAR,CAAZ;AACA,IAAMC,YAAYC,0BAAwBV,GAAxB,WAAlB;AACA,IAAMW,aAAa,0BAAkBF,SAAlB,CAAnB;;AAEAlB,IAAIiB,GAAJ,CAAQ,qBAAR,EAA+BG,WAAWC,SAA1C;AACArB,IAAIiB,GAAJ,CAAQ,eAAR,EAAyBG,WAAWE,MAApC;AACAtB,IAAIuB,IAAJ,CAAS,eAAT,EAA0BH,WAAWG,IAArC;;AAEAvB,IAAIiB,GAAJ,CAAQ,GAAR,EAAa,yBAAUC,SAAV,EAAqBM,IAAlC;AACAxB,IAAIyB,MAAJ,CAAWzB,IAAIiB,GAAJ,CAAQ,MAAR,CAAX,EAA4B,YAAM;AAChC,mBAAOS,IAAP,CAAY,6BAAZ,EAA2C1B,IAAIiB,GAAJ,CAAQ,MAAR,CAA3C;AACD,CAFD;;AAIAU,OAAOC,OAAP,GAAiB5B,GAAjB","file":"init.js","sourcesContent":["import express from 'express';\nimport exphbs from 'express-handlebars';\nimport path from 'path';\nimport cookieParser from 'cookie-parser';\nimport bodyParser from 'body-parser';\nimport logger from '../common/utils/logger';\nimport reactInit from './middleware/react-init';\nimport apiArticleFactory from './middleware/api-article';\n\nconst app = express();\nconst hbs = exphbs.create({\n  extname: '.hbs',\n  defaultLayout: path.join(__dirname, '../../src/server/views/layout')\n});\napp.set('port', (process.env.PORT || 5000));\napp.engine('hbs', hbs.engine);\napp.set('view engine', 'hbs');\napp.set('views', path.join(__dirname, '../../src/server/views'));\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, '../../public')));\n\nconst env = app.get('env');\nconst appConfig = require(`../../config/${env}.json`);\nconst apiArticle = apiArticleFactory(appConfig);\n\napp.get('/api/articles/:slug', apiArticle.getBySlug);\napp.get('/api/articles', apiArticle.getAll);\napp.post('/api/articles', apiArticle.post);\n\napp.get('*', reactInit(appConfig).init);\napp.listen(app.get('port'), () => {\n  logger.info('Node app is running on port', app.get('port'));\n});\n\nmodule.exports = app;\n"]}