{"version":3,"sources":["../../src/server/init.js"],"names":["app","hbs","create","extname","defaultLayout","join","__dirname","engine","set","use","json","urlencoded","extended","static","env","get","appConfig","require","apiArticle","getBySlug","getAll","post","init","info","listen","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,MAAM,wBAAZ;AACA,IAAMC,MAAM,4BAAOC,MAAP,CAAc;AACxBC,WAAS,MADe;AAExBC,iBAAe,eAAKC,IAAL,CAAUC,SAAV,EAAqB,+BAArB;AAFS,CAAd,CAAZ;AAIAN,IAAIO,MAAJ,CAAW,KAAX,EAAkBN,IAAIM,MAAtB;AACAP,IAAIQ,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACAR,IAAIQ,GAAJ,CAAQ,OAAR,EAAiB,eAAKH,IAAL,CAAUC,SAAV,EAAqB,wBAArB,CAAjB;;AAEAN,IAAIS,GAAJ,CAAQ,qBAAWC,IAAX,EAAR;AACAV,IAAIS,GAAJ,CAAQ,qBAAWE,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;AACAZ,IAAIS,GAAJ,CAAQ,6BAAR;AACAT,IAAIS,GAAJ,CAAQ,kBAAQI,MAAR,CAAe,eAAKR,IAAL,CAAUC,SAAV,EAAqB,cAArB,CAAf,CAAR;;AAEA,IAAMQ,MAAMd,IAAIe,GAAJ,CAAQ,KAAR,CAAZ;AACA,IAAMC,YAAYC,0BAAwBH,GAAxB,WAAlB;AACA,IAAMI,aAAa,0BAAkBF,SAAlB,CAAnB;;AAEAhB,IAAIe,GAAJ,CAAQ,qBAAR,EAA+BG,WAAWC,SAA1C;AACAnB,IAAIe,GAAJ,CAAQ,eAAR,EAAyBG,WAAWE,MAApC;AACApB,IAAIqB,IAAJ,CAAS,eAAT,EAA0BH,WAAWG,IAArC;;AAEArB,IAAIe,GAAJ,CAAQ,GAAR,EAAa,yBAAUC,SAAV,EAAqBM,IAAlC;AACA,iBAAOC,IAAP,CAAY,kCAAZ;AACAvB,IAAIwB,MAAJ,CAAW,IAAX;;AAEAC,OAAOC,OAAP,GAAiB1B,GAAjB","file":"init.js","sourcesContent":["import express from 'express';\nimport exphbs from 'express-handlebars';\nimport path from 'path';\nimport cookieParser from 'cookie-parser';\nimport bodyParser from 'body-parser';\nimport logger from '../common/utils/logger';\nimport reactInit from './middleware/react-init';\nimport apiArticleFactory from './middleware/api-article';\n\nconst app = express();\nconst hbs = exphbs.create({\n  extname: '.hbs',\n  defaultLayout: path.join(__dirname, '../../src/server/views/layout')\n});\napp.engine('hbs', hbs.engine);\napp.set('view engine', 'hbs');\napp.set('views', path.join(__dirname, '../../src/server/views'));\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, '../../public')));\n\nconst env = app.get('env');\nconst appConfig = require(`../../config/${env}.json`);\nconst apiArticle = apiArticleFactory(appConfig);\n\napp.get('/api/articles/:slug', apiArticle.getBySlug);\napp.get('/api/articles', apiArticle.getAll);\napp.post('/api/articles', apiArticle.post);\n\napp.get('*', reactInit(appConfig).init);\nlogger.info('Application started on port 3000');\napp.listen(3000);\n\nmodule.exports = app;\n"]}